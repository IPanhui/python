## 搜救设备 ##

 - 背景
  海上搜救服务是国家应急救援体系的重要组成部分，也是国家经济发展的重要保障。海洋救援必须以先进的搜索系统作为辅助。海洋搜索系统有许多方案，比如采用雷达或者光电成像系统，因为光图像传感器有很高的分辨率，若天气恶劣，会出现能见度不高的情况，影响搜救的进度。因此，采用红外、可见光、和DSP图像处理系统构成的光电搜索系统油然而生。
 - 方案
   采用TMS320F2812实现视频采集，通过XINTF接口与多片6416-HPI接口连接，实现图像数据传输。各6416采取流水工作模式，通过EMIFB接口输出处理后的图像数据，经过显示电路，由监视器显示输出图像。

  系统采用可拓展结构，可根据实际需要确定6416图像处理单元数目。通常采用四个或八个6416图像处理单元。

  系统软件对图像数据进行滤波和边缘检测，检测可疑目标并进行识别。

  单视频输入时，可选择四个或八个6416图像处理单元构成图像处理机 。

   每个视频通道拥有四个6416图像处理单元，分别采用流水工作模式，每片6416处理一幅图像的最大周期为4帧，两组的处理结果输出给图像显示模块处理。
  
  ![Aaron Swartz]( https://github.com/IPanhui/python/blob/master/learn/DSP/1.png?raw=true)

 - 系统硬件设计

 硬件系统由三部分组成：视频采集电路、图像处理电路及显示电路。

 - 视频采集电路
  基于2812-DSP的视频信号采集，其中包括视频预处理模块和2812 模块。视频预处理模块包括Y/C分离、电平钳位、同步分离、幅度调整处理电路。2812-DSP片上A/D以12.5M的速度采集视频信号，达到了极限采样速率(采样间隔时间为80ns)。

 - 图像传输接口设计
  图像数据通过2812-DSP-XINTF(16bit)/6416-DSP-HPI(32bit)接口传输，采用一片CPLD将2812-DSP两次输出结果拼接成32bit。优化2812-DSP-XINTF寄存器可使HPI接口传输速率达到最大。对XINTF寄存器的具体优化值见表1。
![Aaron Swartz](https://github.com/IPanhui/python/blob/master/learn/DSP/3.png?raw=true)

 - 目标识别与跟踪
 当提取的可疑目标（一般是指象素数较少的小目标）达到一定的象素数后，采用Hu不变矩特征对可疑目标进行目标识别。

　　对数字图像f(x，y)，p+q阶矩(mpq)和中心矩(μpq)定义为

　　其中p和q是非负的整数。图像的（p+q）阶归一化的中心矩定义为：

　　利用二阶和三阶归一化的中心矩求出七个Hu不变矩组：

![Aaron Swartz](https://github.com/IPanhui/python/blob/master/learn/DSP/2.png?raw=true)
  
  　
   A(x，y)则为位置(x，y)处不变矩的相关值。取A值最大处对应的点作为匹配点。

　　由于不变矩描述的是图像的统计特性，满足对平移、伸缩、旋转等变化的不变性，因而广泛应用于图像识别等领域。该算法的不足之处是计算量大。而仅仅处理局部可疑目标区域图像数据的方法，可以大大减少数据运算量。对识别后的目标加框并跟踪。
